!function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n=window.webpackJsonp;window.webpackJsonp=function(t,i,s){for(var o,a,l=0,c=[];l<t.length;l++)a=t[l],r[a]&&c.push(r[a][0]),r[a]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);for(n&&n(t,i,s);c.length;)c.shift()()};var i={},r={1:0};t.e=function(e){function n(){a.onerror=a.onload=null,clearTimeout(l);var t=r[e];0!==t&&(t&&t[1](new Error("Loading chunk "+e+" failed.")),r[e]=void 0)}var i=r[e];if(0===i)return new Promise(function(e){e()});if(i)return i[2];var s=new Promise(function(t,n){i=r[e]=[t,n]});i[2]=s;var o=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.timeout=12e4,t.nc&&a.setAttribute("nonce",t.nc),a.src=t.p+""+e+".js";var l=setTimeout(n,12e4);return a.onerror=a.onload=n,o.appendChild(a),s},t.m=e,t.c=i,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist",t.oe=function(e){throw console.error(e),e},t(t.s=3)}([function(e,t,n){"use strict";function i(e){function t(e){var t=e.getBoundingClientRect(),n=t.top,i=t.left,r=t.right,s=t.bottom,o=document.documentElement.clientHeight,a=document.documentElement.clientWidth;return(n>0&&n<o||s>0&&s<o)&&(i>0&&i<a||r>0&&r<a)}function n(e,t){var n=new Image;n.src=e.dataset.src,n.onload=function(){e.src=n.src,e.classList.remove("lazyload")},"function"==typeof t&&t()}if(e=Array.from(e),"IntersectionObserver"in window){var i=new IntersectionObserver(function(e){e.forEach(function(e){e.intersectionRatio>0&&n(e.target,function(){i.unobserve(e.target)})})},{threshold:.01});e.forEach(function(e){return i.observe(e)})}else{var s=function(e,t){var n=void 0,i=void 0;return function s(){var o=Date.now(),a=o-n;!n||a>=t?(e(),n=o):a<t&&((0,r.clearTimeout)(i),i=(0,r.setTimeout)(s,t-a))}}(function(){if(0===e.length)return window.removeEventListener("scroll",s);e.filter(function(e){return e.classList.contains("lazyload")}),e.forEach(function(e){return t(e)&&n(e)})},300);window.addEventListener("scroll",s),window.dispatchEvent(new Event("scroll"))}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RECOMMEND_URL="https://music-api-huuevyrmmi.now.sh",t.TOPLIST_URL="https://music-api-huuevyrmmi.now.sh/top",t.SEARCH_URL="https://music-api-huuevyrmmi.now.sh/search",t.LYRICS_URL="https://music-api-huuevyrmmi.now.sh/lyrics"},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;i(this,e),"string"==typeof t&&(this.el=document.getElementById(t)),this.slides=n,this.index=0,this.interval=r,this.render(),this.play()}return r(e,[{key:"render",value:function(){this.el.innerHTML='<div class="ui-slider-group"></div>';var e=this.el.firstElementChild;e.style.width=100*this.slides.length+"%",e.innerHTML=this.slides.map(function(e){return'\n        <div class="ui-slider-item">\n          <a href="'+e.linkUrl+'">\n            <img src="'+e.picUrl+'" alt="slide-img">\n          </a>\n        </div>\n      '}).join("");var t='\n      <p class="ui-slider-dots">\n        '+this.slides.map(function(e,t){return 0===t?'<b class="ui-state-active"></b>':'<b class=""></b>'}).join("")+"\n      </p>\n    ";this.el.innerHTML+=t}},{key:"play",value:function(){setInterval(this.next.bind(this),this.interval)}},{key:"next",value:function(){var e=this.el.firstElementChild;if(this.index+=1,this.index===this.slides.length)return e.style.transform="translate(0)",this.index=0,void this.dotClass();var t="-"+this.index/this.slides.length*100+"%";e.style.transform="translate("+t+")",this.dotClass()}},{key:"dotClass",value:function(){var e=(this.el.lastElementChild,this.el.lastElementChild.children);Array.prototype.map.call(e,function(e){return e.classList.remove("ui-state-active")}),this.el.lastElementChild.children[this.index].className="ui-state-active"}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){var e=location.hash;if(/^#player\?.+/.test(e)){var t=e.slice(e.indexOf("?")+1).match(/(\w+)=([^&]+)/g),n=t&&t.reduce(function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e},{});y.play(n)}else y.hide()}var s=n(4),o=i(s),a=n(9),l=i(a),c=n(2),u=(i(c),n(10)),d=i(u),h=n(0),f=(i(h),n(11)),p=i(f),m=n(12),v=i(m);n.e(0).then(n.bind(null,16)),(0,d.default)();var y=(new o.default(document.getElementById("recom-view")).launch(),new l.default(document.getElementById("rank-view")).launch(),new p.default(document.getElementById("search-view")),new v.default(document.getElementById("player")));document.querySelector(".show-player").addEventListener("click",function(){y.show()}),r(),addEventListener("hashchange",r)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2),a=i(o),l=n(0),c=i(l),u=n(1),d=function(){function e(t){r(this,e),this.el=t}return s(e,[{key:"launch",value:function(){var e=this;return fetch(u.RECOMMEND_URL).then(function(e){return e.json()}).then(function(t){return e.json=t}).then(function(){return e.render()}),this}},{key:"render",value:function(){this.renderSlider(this.json.data.slider),this.renderRadios(this.json.data.radioList),this.renderPlayLists(this.json.data.songList),(0,c.default)(document.querySelectorAll(".lazyload"))}},{key:"renderSlider",value:function(e){this.slider=new a.default("slider",e)}},{key:"renderRadios",value:function(e){document.getElementById("radios-group").innerHTML=e.map(function(e){return'\n        <li class="list-item">\n          <a href="#" class="list-main">\n            <div class="list-media">\n            <img class="lazyload" src="../imgs/default_pic.jpg" data-src="'+e.picUrl+'" alt="#">\n            <span class="icon icon-play"></span>\n            </div>\n            <div class="list-info"><h3>'+e.Ftitle+"</h3></div>\n          </a>\n        </li>\n      "}).join("")}},{key:"renderPlayLists",value:function(e){document.getElementById("songlists-group").innerHTML=e.map(function(e){return'\n        <li class="list-item">\n          <a href="#" class="list-main">\n            <div class="list-media">\n            <img class="lazyload" src="../imgs/default_pic.jpg" data-src="'+e.picUrl+'" alt="#">\n            <span class="icon icon-play"></span>\n            </div>\n            <div class="list-info"><h3>'+e.songListDesc+"</h3></div>\n          </a>\n        </li>\n      "}).join("")}}]),e}();t.default=d},function(e,t,n){function i(e,t){this._id=e,this._clearFn=t}var r=Function.prototype.apply;t.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(6),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function i(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return c[l]=i,a(l),l++}function r(e){delete c[e]}function s(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function o(e){if(u)setTimeout(o,0,e);else{var t=c[e];if(t){u=!0;try{s(t)}finally{r(e),u=!1}}}}if(!e.setImmediate){var a,l=1,c={},u=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?function(){a=function(e){t.nextTick(function(){o(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),a=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){o(e.data)},a=function(t){e.port2.postMessage(t)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var e=d.documentElement;a=function(t){var n=d.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){a=function(e){setTimeout(o,0,e)}}(),h.setImmediate=i,h.clearImmediate=r}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(7),n(8))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function s(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function o(){m&&f&&(m=!1,f.length?p=f.concat(p):v=-1,p.length&&a())}function a(){if(!m){var e=r(o);m=!0;for(var t=p.length;t;){for(f=p,p=[];++v<t;)f&&f[v].run();v=-1,t=p.length}f=null,m=!1,s(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var u,d,h=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var f,p=[],m=!1,v=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new l(e,t)),1!==p.length||m||r(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(s),a=n(1),l=function(){function e(t){i(this,e),this.el=t}return r(e,[{key:"launch",value:function(){var e=this;return fetch(a.TOPLIST_URL).then(function(e){return e.json()}).then(function(t){return e.list=t.data.topList}).then(function(){return e.render()}),this}},{key:"render",value:function(){document.getElementById("rank-list").innerHTML=this.list.map(function(e){return'\n        <li class="topic_item" data-id="4" data-type="0">\n        <div class="topic_main">\n          <a href="#" class="topic_media">\n              <img class="lazyload" data-src="'+e.picUrl+'" src="../imgs/default_pic.jpg">\n              <span class="listen_count"><i class="icon icon_listen"></i>'+(e.listenCount/1e4).toFixed(1)+'万</span>\n          </a>\n          <div class="topic_info">\n              <div class="topic_cont">\n                  <h3 class="topic_tit">'+e.topTitle+"</h3>\n                  "+e.songList.map(function(e,t){return"<p>"+(t+1)+'<span class="text_name">'+e.songname+"</span>-"+e.singername+"</p>"}).join("")+'\n              </div>\n              <i class="topic_arrow"></i>\n          </div>\n        </div>\n      </li>\n        '}).join(""),(0,o.default)(document.querySelectorAll(".lazyload"))}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){document.addEventListener("click",function(e){var t=e.target;if("tab"===t.dataset.role){[].forEach.call(t.parentElement.children,function(e){e.classList.remove("active")}),t.classList.add("active");var n=document.querySelector(t.dataset.view);n&&([].forEach.call(n.parentElement.children,function(e){e.style.display="none"}),n.style.display="block")}})};t.default=i},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t){i(this,e),this.el=t,this.input=this.el.querySelector("#search-input"),this.input.addEventListener("keyup",this.onKeyUp.bind(this)),this.songs=this.el.querySelector(".search-content"),this.page=1,this.keyword="",this.perpage=20,this.nomore=!1,this.fetching=!1,this.onscroll=this.onScroll.bind(this),window.addEventListener("scroll",this.onscroll),this.clear=this.el.querySelector(".icon-cancelcircled"),this.clear.style.display="none",this.input.addEventListener("input",this.showClearInput.bind(this)),this.clear.addEventListener("click",this.clearInput.bind(this)),this.recordElement=this.el.querySelector("#record-keys"),this.renderRecords(),this.recordElement.querySelector("#record-clear-btn").addEventListener("click",this.clearRecord.bind(this))}return r(e,[{key:"onKeyUp",value:function(e){var t=e.target.value.trim();if(!t)return this.reset();"Enter"===e.key&&(this.recordElement.style.display="none",this.search(t),this.record(t))}},{key:"onScroll",value:function(e){if(this.nomore)return window.removeEventListener("scroll",this.onscroll);pageYOffset+document.documentElement.clientHeight>document.body.scrollHeight-50&&this.search(this.keyword,this.page+1)}},{key:"search",value:function(e,t){var n=this;(this.page||this.keyword!==e)&&(this.nomore||this.fetching||(this.keyword!==e&&this.reset(),this.keyword=e,this.loading(),fetch("https://music-api-oiwxkoneso.now.sh/search?keyword="+this.keyword+"&page="+(t||this.page)).then(function(e){return e.json()}).then(function(e){return n.page=e.data.song.curpage,n.nomore="no results"===e.message,e.data.song.list}).then(function(e){return n.append(e)}).then(function(){return n.done()}).catch(function(){return n.done()})))}},{key:"append",value:function(e){var t=e.map(function(e){var t=e.singer.map(function(e){return e.name}).join(" ");return'\n      <li>\n        <a class="song-item"\n        href="#player?artist='+t+"&songid="+e.songid+"&songname="+e.songname+"&albummid="+e.albummid+"&duration="+e.interval+'">\n          <i class="icon icon-music"></i>\n          <h6 class="main-tit">'+e.songname+'</h6>\n          <p class="sub-tit">'+t+"</p>\n        </a>\n      </li>\n      "}).join("");this.songs.insertAdjacentHTML("beforeend",t),this.songs.style.display="block"}},{key:"loading",value:function(){this.fetching=!0,this.el.querySelector(".search-loading").classList.add("show")}},{key:"done",value:function(){this.fetching=!1,this.more?(this.el.querySelectorAll(".loading-icon, .loading-text").forEach(function(e){return e.style.display="none"}),this.el.querySelector(".loading-done").style.display="block",this.el.querySelector(".search-loading").classList.add("show")):this.el.querySelector(".search-loading").classList.remove("show")}},{key:"reset",value:function(){this.page=1,this.keyword="",this.nomore=!1,this.fetching=!1,this.songs.innerHTML=""}},{key:"showClearInput",value:function(){this.clear.style.display="block"}},{key:"clearInput",value:function(){this.input.value="",this.songs.style.display="none",this.renderRecords()}},{key:"renderRecords",value:function(){var e=localStorage.getItem("search_history");if(e){var t=e.split(",").map(function(e){return'\n        <li>\n          <a href="#">\n            <span class="iconfont icon-shijian"></span>\n            <span class="keyword">'+e+"</span>\n          </a>\n        </li>\n        "}).join("");this.recordElement.style.display="block",this.recordElement.querySelector("ul").innerHTML=t}else this.recordElement.style.display="none"}},{key:"record",value:function(e){var t=localStorage.getItem("search_history");if(t)if(t.search(e)>0){var n=e+",?",i=new RegExp(n);console.log(i),t=t.replace(i,""),t=e+","+t,t=t.replace(/,\s*$/,""),localStorage.setItem("search_history",t)}else t=e+","+t,localStorage.setItem("search_history",t);else localStorage.setItem("search_history",e)}},{key:"clearRecord",value:function(){localStorage.removeItem("search_history"),this.renderRecords()}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(13),a=i(o),l=n(14),c=i(l),u=n(15),d=function(){function e(t){r(this,e),this.el=t,this.el.addEventListener("click",this),this.audio=this.createAudio(),this.lyrics=new c.default(this.el.querySelector(".player-lyrics"),this.audio),this.progress=new a.default(this.el.querySelector(".progress")),this.fetching=!1}return s(e,[{key:"createAudio",value:function(){var e=this,t=document.createElement("audio");return t.id="player-"+Math.floor(100*Math.random())+"-"+ +new Date,t.addEventListener("ended",function(){e.audio.play(),e.lyrics.restart(),e.progress.restart()}),document.body.appendChild(t),t}},{key:"handleEvent",value:function(e){var t=e.target;switch(!0){case t.matches(".icon-play"):this.onPlay(e);break;case t.matches(".icon-pause"):this.onPause(e);break;case t.matches(".icon-list"):this.hide()}}},{key:"onPlay",value:function(e){this.fetching||(this.audio.play(),this.lyrics.start(),this.progress.start(),e.target.classList.add("icon-pause"),e.target.classList.remove("icon-play"))}},{key:"onPause",value:function(e){this.audio.pause(),this.lyrics.pause(),this.progress.pause(),e.target.classList.add("icon-play"),e.target.classList.remove("icon-pause")}},{key:"play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t){this.el.querySelector(".song-name").innerText=t.songname,this.el.querySelector(".song-artist").innerText=t.artist,this.progress.reset(t.duration);var n=(0,u.albumCoverUrl)(t.albummid);this.el.querySelector(".album-cover").src=n,this.el.querySelector(".player-background").style.backgroundImage="url("+n+")",t.songid&&(this.songid!==t.songid&&(this.el.querySelector(".icon-action").className="icon-action icon-play"),this.songid=t.songid,this.audio.src=(0,u.songUrl)(this.songid),this.fetching=!0,fetch((0,u.lyricsUrl)(this.songid)).then(function(e){return e.json()}).then(function(e){return e.lyric}).then(function(t){return e.lyrics.reset(t)}).catch(function(){}).then(function(){return e.fetching=!1})),this.show()}}},{key:"show",value:function(){this.el.classList.add("show"),document.body.classList.add("noscroll")}},{key:"hide",value:function(){this.el.classList.remove("show"),document.body.classList.remove("noscroll")}}]),e}();t.default=d},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n,r){i(this,e),this.el=t,this.elapsed=0,this.duration=n||0,this.progress=0,this.render(),this.progressElement=this.el.querySelector(".progress-bar-progress"),this.elapsedElement=this.el.querySelector(".progress-elapsed"),this.durationElement=this.el.querySelector(".progress-duration"),this.elapsedElement.innerText=this.formatTime(this.elapsed),this.durationElement.innerText=this.formatTime(this.elapsed),r&&this.start()}return r(e,[{key:"start",value:function(){this.pause(),this.intervalId=setInterval(this.update.bind(this),50)}},{key:"pause",value:function(){clearInterval(this.intervalId)}},{key:"update",value:function(){this.elapsed+=.05,this.elapsed>=this.duration&&this.reset(),this.progress=this.elapsed/this.duration,this.progressElement.style.transform="translate("+(100*this.progress-100)+"%)",this.elapsedElement.innerText=this.formatTime(this.elapsed)}},{key:"reset",value:function(e){this.pause(),this.elapsed=0,this.progress=0,this.progressElement.style.transform="translate(-100%)",this.elapsedElement.innerText=this.formatTime(this.elapsed),e&&(this.duration=+e,this.durationElement.innerText=this.formatTime(this.duration))}},{key:"restart",value:function(){this.reset(),this.start()}},{key:"render",value:function(){this.el.innerHTML='\n      <div class="progress-time progress-elapsed"></div>\n        <div class="progress-bar">\n          <div class="progress-bar-progress"></div>\n        </div>\n      <div class="progress-time progress-duration"></div>\n    '}},{key:"formatTime",value:function(e){var t=Math.floor(e/60),n=Math.floor(e%60);return t<10&&(t="0"+t),n<10&&(n="0"+n),t+":"+n}}]),e}();t.default=s},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n){i(this,e),this.el=t,this.el.innerHTML='<div class="player-lyrics-lines"></div>',this.lines=this.el.querySelector(".player-lyrics-lines"),this.audio=n,this.text="",this.index=0,this.lyrics=[],this.elapsed=0,this.reset(this.text)}return r(e,[{key:"start",value:function(){this.pause(),this.intervalId=setInterval(this.update.bind(this),1e3)}},{key:"pause",value:function(){clearInterval(this.intervalId)}},{key:"update",value:function(){if(this.elapsed=Math.round(this.audio?this.audio.currentTime:this.elapsed+1),this.index!==this.lyrics.length-1){for(var e=this.index+1;e<this.lyrics.length;e++){var t=this.getSeconds(this.lyrics[e]);if(this.elapsed===t&&(!this.lyrics[e+1]||this.elapsed<this.getSeconds(this.lyrics[e+1]))){this.lines.children[this.index].classList.remove("active"),this.lines.children[e].classList.add("active"),this.index=1;break}}if(this.index>2){var n=-(this.index-2)*this.LINE_HEIGHT;this.$lines.style.transform="translateY("+n+"px)"}}}},{key:"render",value:function(){var e=this.lyrics.map(function(e){return'\n      <div class="player-lyrics-line">'+e.slice(10)+"</div>\n    "}).join("");this.lines.innerHTML=e}},{key:"reset",value:function(e){this.pause(),this.index=0,this.elapsed=0,this.lines.style.transform="translateY(0)";var t=this.lines.querySelector(".active");t&&t.classList.remove("active"),e&&(this.text=this.formatText(e)||"",this.lyrics=this.text.match(/^\[\d{2}:\d{2}.\d{2}\](.+)/gm)||[],this.lyrics.length&&this.render()),this.lyrics.length&&this.lines.children[this.index].classList.add("active")}},{key:"restart",value:function(){this.reset(),this.start()}},{key:"getSeconds",value:function(e){return+e.replace(/^\[(\d{2}):(\d{2}).*/,function(e,t,n){return 60*+t+ +n})}},{key:"formatText",value:function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerHTML}}]),e}();s.prototype.LINE_HEIGHT=42,t.default=s},function(e,t,n){"use strict";function i(e){return"http://ws.stream.qqmusic.qq.com/"+e+".m4a?fromtag=46"}function r(e){return a.LYRICS_URL+"?id="+e}function s(e){return"https://y.gtimg.cn/music/photo_new/T002R150x150M000"+e+".jpg"}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return a.SEARCH_URL+"?keyword="+e+"&page="+t}Object.defineProperty(t,"__esModule",{value:!0}),t.songUrl=i,t.lyricsUrl=r,t.albumCoverUrl=s,t.searchUrl=o;var a=n(1)}]);